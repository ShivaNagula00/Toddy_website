<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toddy Milk - Fresh & Natural</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- Leaflet CSS for free maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <header>
        <h1 data-en="Toddy Milk" data-te="‡∞§‡∞æ‡∞ü‡∞ø ‡∞∞‡∞∏‡∞Ç">Toddy Milk</h1>
        <div class="lang-toggle">
            <button onclick="setLang('en')">English</button>
            <button onclick="setLang('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
            <a href="login.html" style="background:#1b5e20; color:white; padding:8px 12px; text-decoration:none; border-radius:4px; margin-left:10px;">üë§ Owner Login</a>
        </div>
    </header>

    <main>
        <section class="order-form">
            <h2 data-en="Place Your Order" data-te="‡∞Æ‡±Ä ‡∞Ü‡∞∞‡±ç‡∞°‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø">Place Your Order</h2>
            
            <!-- Customer Details Section -->
            <div class="customer-details">
                <h3 data-en="Customer Details" data-te="‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡∞∞‡±ç ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å">Customer Details</h3>
                
                <div class="form-group">
                    <label data-en="Customer Name:" data-te="‡∞ï‡∞∏‡±ç‡∞ü‡∞Æ‡∞∞‡±ç ‡∞™‡±á‡∞∞‡±Å:">Customer Name:</label>
                    <input type="text" id="customerName" placeholder="Enter your full name" required>
                    <span class="error" id="nameError"></span>
                </div>

                <div class="form-group">
                    <label data-en="Mobile Number:" data-te="‡∞Æ‡±ä‡∞¨‡±à‡∞≤‡±ç ‡∞®‡∞Ç‡∞¨‡∞∞‡±ç:">Mobile Number:</label>
                    <input type="tel" id="mobileNumber" placeholder="Enter 10-digit mobile number" maxlength="10" required>
                    <span class="error" id="mobileError"></span>
                </div>
            </div>
            
            <div class="form-group">
                <label data-en="Select Type:" data-te="‡∞∞‡∞ï‡∞Ç ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø:">Select Type:</label>
                <select id="toddyType" onchange="updateAvailabilityAndCalculate()">
                    <option value="eetha" data-en="Eetha" data-te="‡∞à‡∞§">Eetha</option>
                    <option value="thati" data-en="Thati" data-te="‡∞§‡∞æ‡∞ü‡∞ø">Thati</option>
                    <option value="neera" data-en="Neera" data-te="‡∞®‡±Ä‡∞∞‡∞æ">Neera</option>
                </select>
                <div id="availabilityInfo" style="margin-top:5px;font-size:14px;color:#2e7d32;"></div>
                <div id="priceInfo" style="margin-top:5px;font-size:14px;color:#1565c0;font-weight:bold;"></div>
            </div>

            <div class="form-group">
                <label data-en="Quantity (Litres):" data-te="‡∞™‡∞∞‡∞ø‡∞Æ‡∞æ‡∞£‡∞Ç (‡∞≤‡±Ä‡∞ü‡∞∞‡±ç‡∞≤‡±Å):">Quantity (Litres):</label>
                <input type="number" id="litres" min="2" value="2" onchange="validateQuantityAndCalculate()">
                <small data-en="Minimum 2 litres" data-te="‡∞ï‡∞®‡±Ä‡∞∏‡∞Ç 2 ‡∞≤‡±Ä‡∞ü‡∞∞‡±ç‡∞≤‡±Å">Minimum 2 litres</small>
                <div id="quantityError" class="error"></div>
            </div>

            <div class="form-group">
                <label data-en="Delivery Option:" data-te="‡∞°‡±Ü‡∞≤‡∞ø‡∞µ‡∞∞‡±Ä ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï:">Delivery Option:</label>
                <select id="deliveryOption" onchange="toggleDelivery()">
                    <option value="pickup" data-en="Self Pickup" data-te="‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ó‡∞æ ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç">Self Pickup</option>
                    <option value="delivery" data-en="Home Delivery" data-te="‡∞á‡∞Ç‡∞ü‡∞ø‡∞ï‡∞ø ‡∞°‡±Ü‡∞≤‡∞ø‡∞µ‡∞∞‡±Ä">Home Delivery</option>
                </select>
            </div>

            <div id="deliverySection" class="hidden">
                <div class="location-section">
                    <h3 data-en="Delivery Location" data-te="‡∞°‡±Ü‡∞≤‡∞ø‡∞µ‡∞∞‡±Ä ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç">Delivery Location</h3>
                    
                    <div class="form-group">
                        <label data-en="Enter Your Address:" data-te="‡∞Æ‡±Ä ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ ‡∞∞‡∞æ‡∞Ø‡∞Ç‡∞°‡∞ø:">Enter Your Address:</label>
                        <textarea id="address" placeholder="Type your full delivery address (area, landmark, city)"></textarea>
                        <span class="error" id="locationError"></span>
                    </div>
                    
                    <div class="location-buttons">
                        <button type="button" onclick="searchAddress()" data-en="üîç Search Address" data-te="üîç ‡∞ö‡∞ø‡∞∞‡±Å‡∞®‡∞æ‡∞Æ‡∞æ ‡∞µ‡±Ü‡∞§‡∞ï‡∞Ç‡∞°‡∞ø">üîç Search Address</button>
                        <button type="button" id="useLocationBtn" onclick="getCurrentLocation()" data-en="üìç Use Current Location" data-te="üìç ‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç ‡∞µ‡∞æ‡∞°‡∞Ç‡∞°‡∞ø">üìç Use Current Location</button>
                    </div>
                    
                    <div id="mapContainer" class="hidden">
                        <div id="map"></div>
                        <div id="googleMap" style="height: 300px; width: 100%; margin-top: 10px;"></div>
                        <p class="map-instruction" data-en="‚úÖ Location found! Red marker = Shop, Blue marker = Your location (drag to fine-tune if needed)" data-te="‚úÖ ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø! ‡∞é‡∞∞‡±ç‡∞∞ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡∞∞‡±ç = ‡∞¶‡±Å‡∞ï‡∞æ‡∞®‡∞Ç, ‡∞®‡±Ä‡∞≤ ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡∞∞‡±ç = ‡∞Æ‡±Ä ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç">‚úÖ Location found! Red marker = Shop, Blue marker = Your location (drag to fine-tune if needed)</p>
                    </div>
                    
                    <div class="delivery-info">
                        <div id="distanceInfo"></div>
                        <div id="deliveryChargeInfo"></div>
                    </div>
                </div>
            </div>

            <div class="price-section">
                <div id="priceDetails">Total: ‚Çπ0</div>
            </div>

            <div class="payment-section">
                <h3 data-en="Payment" data-te="‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å">Payment</h3>
                
                <div class="payment-summary">
                    <div id="paymentTotal">Total: ‚Çπ0</div>
                </div>

                <!-- UPI Payment Options -->
                <div class="upi-payment-box" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <p><strong>üí≥ Pay using UPI</strong></p>
                    
                    <!-- Manual UPI ID with Copy -->
                    <div style="background: white; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <p><strong>UPI ID:</strong></p>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span id="upiId" style="font-family: monospace; font-size: 16px; color: #2e7d32;">6302564464@pthdfc</span>
                            <button type="button" id="copyBtn" onclick="copyUPI()" style="padding: 6px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; width: 50px; height: 30px; display: flex; align-items: center; justify-content: center;">üìã</button>
                        </div>
                        <small style="color: #666;">Copy this UPI ID and pay using any UPI app (GPay, PhonePe, Paytm, BHIM)</small>
                    </div>
                    
                    <!-- OR Divider -->
                    <div style="text-align: center; margin: 15px 0; color: #666;">OR</div>
                    
                    <!-- Direct UPI Payment -->
                    <button id="payBtn" onclick="payNow()" class="pay-btn" disabled data-en="Pay with UPI Apps" data-te="UPI ‡∞Ø‡∞æ‡∞™‡±ç‡∞∏‡±ç ‡∞§‡±ã ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø">Pay with UPI Apps</button>
                </div>
                
                <div class="payment-info">
                    <p class="upi-info" data-en="‚Ä¢ Choose any payment method above" data-te="‚Ä¢ ‡∞™‡±à‡∞® ‡∞è‡∞¶‡±à‡∞®‡∞æ ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø‡∞®‡∞ø ‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø">‚Ä¢ Choose any payment method above</p>
                    <p class="upi-info" data-en="‚Ä¢ Complete payment and confirm when done" data-te="‚Ä¢ ‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞™‡±Å ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞ö‡±á‡∞∏‡∞ø ‡∞ï‡∞®‡±ç‡∞´‡∞∞‡±ç‡∞Æ‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø">‚Ä¢ Complete payment and confirm when done</p>
                    <p class="upi-info" id="iosNote" style="display: none; color: #ff6b35;">‚Ä¢ iPhone users: If UPI apps don't open, use "Copy UPI ID" option</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Global variables for the script
        const toddyType = document.getElementById('toddyType');
        const deliveryOption = document.getElementById('deliveryOption');
        const paidCheck = document.getElementById('paidCheck');
    </script>
    
    <!-- Load Leaflet JS for free maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Google Maps JavaScript API (Replace YOUR_API_KEY with actual key) -->
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places" async defer></script> -->
    
    <!-- Load Firebase -->
    <script src="js/firebase.js" type="module"></script>
    
    <script src="js/script.js"></script>
</body>
</html>